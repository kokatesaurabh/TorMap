import React, { useState } from 'react';
import axios from 'axios';

const VulnerabilityScan = () => {
  const [onionUrl, setOnionUrl] = useState('');
  const [scanResults, setScanResults] = useState('No results');
  const [attackType, setAttackType] = useState('vulnerability');

  const handleScan = async () => {
    try {
      let response;
      if (attackType === 'vulnerability') {
        response = await axios.post('/api/scan/vulnerability', { url: onionUrl });
      } else if (attackType === 'deanonymization') {
        response = await axios.post('/api/scan/deanonymization', { url: onionUrl });
      }
      setScanResults(response.data);
    } catch (error) {
      console.error('Scan error:', error); // Log the error for debugging
      setScanResults(error.response?.data?.error || 'Error during scan');
    }
  };
  

  return (
    <div style={{ padding: '20px', backgroundColor: '#ecf0f1', borderRadius: '5px' }}>
      <h2>Vulnerability Scan</h2>
      <input
        type="text"
        value={onionUrl}
        onChange={(e) => setOnionUrl(e.target.value)}
        placeholder="Enter .onion URL"
        style={{ width: '100%', padding: '10px', marginBottom: '10px', borderRadius: '5px', border: '1px solid #bdc3c7' }}
      />
      <select value={attackType} onChange={(e) => setAttackType(e.target.value)} style={{ width: '100%', padding: '10px', marginBottom: '10px', borderRadius: '5px', border: '1px solid #bdc3c7' }}>
        <option value="vulnerability">Vulnerability Scan</option>
        <option value="deanonymization">De-Anonymization</option>
      </select>
      <button onClick={handleScan} style={{ padding: '10px 15px', backgroundColor: '#3498db', color: '#fff', border: 'none', borderRadius: '5px', cursor: 'pointer' }}>Start Scan</button>
      <p>Results: {scanResults}</p>
    </div>
  );
};



export default VulnerabilityScan;
